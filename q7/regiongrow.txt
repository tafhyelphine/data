import cv2
import numpy as np
import matplotlib.pyplot as plt

# Load image in grayscale
img = cv2.imread('image2.png', cv2.IMREAD_GRAYSCALE)

# Convert image to float32
img = np.float32(img)

# Seed point for region growing (you can change coordinates)
seed_point = (50, 50)  # (row, col)

# Region-growing mask
h, w = img.shape
segmented = np.zeros((h, w), np.uint8)
tolerance = 10  # intensity difference tolerance

# Initialize region with seed
region_pixels = [seed_point]
segmented[seed_point] = 255

while region_pixels:
    x, y = region_pixels.pop(0)
    for dx in [-1,0,1]:
        for dy in [-1,0,1]:
            nx, ny = x+dx, y+dy
            if 0<=nx<h and 0<=ny<w and segmented[nx,ny]==0:
                if abs(int(img[nx,ny]) - int(img[x,y])) < tolerance:
                    segmented[nx,ny] = 255
                    region_pixels.append((nx,ny))

# Display results
plt.figure(figsize=(10,5))
plt.subplot(1,2,1)
plt.title('Original')
plt.imshow(img, cmap='gray')
plt.axis('off')

plt.subplot(1,2,2)
plt.title('Region Growing Segmentation')
plt.imshow(segmented, cmap='gray')
plt.axis('off')

plt.show()
